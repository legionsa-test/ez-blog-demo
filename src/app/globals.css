@import "tailwindcss";
@import "tw-animate-css";

@custom-variant dark (&:is(.dark *));

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --font-sans: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);
  --color-sidebar-ring: var(--sidebar-ring);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar: var(--sidebar);
  --color-chart-5: var(--chart-5);
  --color-chart-4: var(--chart-4);
  --color-chart-3: var(--chart-3);
  --color-chart-2: var(--chart-2);
  --color-chart-1: var(--chart-1);
  --color-ring: var(--ring);
  --color-input: var(--input);
  --color-border: var(--border);
  --color-destructive: var(--destructive);
  --color-accent-foreground: var(--accent-foreground);
  --color-accent: var(--accent);
  --color-muted-foreground: var(--muted-foreground);
  --color-muted: var(--muted);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-secondary: var(--secondary);
  --color-primary-foreground: var(--primary-foreground);
  --color-primary: var(--primary);
  --color-popover-foreground: var(--popover-foreground);
  --color-popover: var(--popover);
  --color-card-foreground: var(--card-foreground);
  --color-card: var(--card);
  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);
  --radius-2xl: calc(var(--radius) + 8px);
  --radius-3xl: calc(var(--radius) + 12px);
  --radius-4xl: calc(var(--radius) + 16px);
}

:root {
  --radius: 0.625rem;
  --background: oklch(1 0 0);
  --foreground: oklch(0.145 0 0);
  --card: oklch(1 0 0);
  --card-foreground: oklch(0.145 0 0);
  --popover: oklch(1 0 0);
  --popover-foreground: oklch(0.145 0 0);
  --primary: oklch(0.205 0 0);
  --primary-foreground: oklch(0.985 0 0);
  --secondary: oklch(0.97 0 0);
  --secondary-foreground: oklch(0.205 0 0);
  --muted: oklch(0.97 0 0);
  --muted-foreground: oklch(0.556 0 0);
  --accent: oklch(0.97 0 0);
  --accent-foreground: oklch(0.205 0 0);
  --destructive: oklch(0.577 0.245 27.325);
  --border: oklch(0.922 0 0);
  --input: oklch(0.922 0 0);
  --ring: oklch(0.708 0 0);
  --chart-1: oklch(0.646 0.222 41.116);
  --chart-2: oklch(0.6 0.118 184.704);
  --chart-3: oklch(0.398 0.07 227.392);
  --chart-4: oklch(0.828 0.189 84.429);
  --chart-5: oklch(0.769 0.188 70.08);
  --sidebar: oklch(0.985 0 0);
  --sidebar-foreground: oklch(0.145 0 0);
  --sidebar-primary: oklch(0.205 0 0);
  --sidebar-primary-foreground: oklch(0.985 0 0);
  --sidebar-accent: oklch(0.97 0 0);
  --sidebar-accent-foreground: oklch(0.205 0 0);
  --sidebar-border: oklch(0.922 0 0);
  --sidebar-ring: oklch(0.708 0 0);
}

.dark {
  --background: oklch(0.145 0 0);
  --foreground: oklch(0.985 0 0);
  --card: oklch(0.205 0 0);
  --card-foreground: oklch(0.985 0 0);
  --popover: oklch(0.205 0 0);
  --popover-foreground: oklch(0.985 0 0);
  --primary: oklch(0.922 0 0);
  --primary-foreground: oklch(0.205 0 0);
  --secondary: oklch(0.269 0 0);
  --secondary-foreground: oklch(0.985 0 0);
  --muted: oklch(0.269 0 0);
  --muted-foreground: oklch(0.708 0 0);
  --accent: oklch(0.269 0 0);
  --accent-foreground: oklch(0.985 0 0);
  --destructive: oklch(0.704 0.191 22.216);
  --border: oklch(1 0 0 / 10%);
  --input: oklch(1 0 0 / 15%);
  --ring: oklch(0.556 0 0);
  --chart-1: oklch(0.488 0.243 264.376);
  --chart-2: oklch(0.696 0.17 162.48);
  --chart-3: oklch(0.769 0.188 70.08);
  --chart-4: oklch(0.627 0.265 303.9);
  --chart-5: oklch(0.645 0.246 16.439);
  --sidebar: oklch(0.205 0 0);
  --sidebar-foreground: oklch(0.985 0 0);
  --sidebar-primary: oklch(0.488 0.243 264.376);
  --sidebar-primary-foreground: oklch(0.985 0 0);
  --sidebar-accent: oklch(0.269 0 0);
  --sidebar-accent-foreground: oklch(0.985 0 0);
  --sidebar-border: oklch(1 0 0 / 10%);
  --sidebar-ring: oklch(0.556 0 0);
}

@layer base {
  * {
    @apply border-border outline-ring/50;
  }

  body {
    @apply bg-background text-foreground;
  }
}

/* Typography plugin */
@plugin "@tailwindcss/typography";

/* Tiptap Editor Styles */
.ProseMirror {
  outline: none;
}

.ProseMirror p.is-editor-empty:first-child::before {
  content: attr(data-placeholder);
  float: left;
  color: var(--muted-foreground);
  pointer-events: none;
  height: 0;
}

.ProseMirror img {
  max-width: 100%;
  height: auto;
  border-radius: 0.5rem;
  margin: 1rem 0;
}

.ProseMirror img.ProseMirror-selectednode {
  outline: 2px solid var(--primary);
}

/* Focus ring for accessibility */
.focus-visible:focus {
  outline: 2px solid var(--ring);
  outline-offset: 2px;
}

/* Syntax Highlighting (lowlight/highlight.js based) */
.hljs-comment,
.hljs-quote {
  color: #6b7280;
  font-style: italic;
}

.hljs-keyword,
.hljs-selector-tag,
.hljs-built_in,
.hljs-name,
.hljs-tag {
  color: #c084fc;
}

.hljs-string,
.hljs-title,
.hljs-section,
.hljs-attribute,
.hljs-literal,
.hljs-template-tag,
.hljs-template-variable,
.hljs-type,
.hljs-addition {
  color: #34d399;
}

.hljs-deletion,
.hljs-selector-attr,
.hljs-selector-pseudo,
.hljs-meta {
  color: #f87171;
}

.hljs-doctag,
.hljs-attr {
  color: #60a5fa;
}

.hljs-symbol,
.hljs-bullet,
.hljs-link,
.hljs-params,
.hljs-variable,
.hljs-class .hljs-title {
  color: #fbbf24;
}

.hljs-emphasis {
  font-style: italic;
}

.hljs-strong {
  font-weight: bold;
}

/* Table styles for editor */
.ProseMirror table {
  border-collapse: collapse;
  margin: 1rem 0;
  width: 100%;
  table-layout: auto;
}

.ProseMirror th,
.ProseMirror td {
  border: 1px solid var(--border);
  padding: 0.5rem 0.75rem;
  vertical-align: top;
  min-width: 100px;
}

.ProseMirror th {
  background: var(--muted);
  font-weight: 600;
}

.ProseMirror .selectedCell {
  background: var(--accent);
}

/* YouTube embed responsive */
.ProseMirror iframe[src*="youtube"] {
  width: 100%;
  aspect-ratio: 16/9;
  border-radius: 0.5rem;
  margin: 1rem 0;
}

/* Page transitions */
.page-transition-enter {
  opacity: 0;
  transform: translateY(8px);
}

.page-transition-enter-active {
  opacity: 1;
  transform: translateY(0);
  transition: opacity 200ms ease-in-out, transform 200ms ease-in-out;
}

.page-transition-exit {
  opacity: 1;
  transform: translateY(0);
}

.page-transition-exit-active {
  opacity: 0;
  transform: translateY(-8px);
  transition: opacity 200ms ease-in-out, transform 200ms ease-in-out;
}

/* Prose table styles for blog content */
.prose table {
  border-collapse: collapse;
  margin: 1.5rem 0;
  width: 100%;
  overflow-x: auto;
  display: block;
}

.prose th,
.prose td {
  border: 1px solid var(--border);
  padding: 0.5rem 0.75rem;
  text-align: left;
}

.prose th {
  background: var(--muted);
  font-weight: 600;
}

.prose tbody tr:nth-child(even) {
  background: var(--muted) / 50%;
}

/* Prose code block styles */
.prose pre {
  background: var(--muted);
  border: 1px solid var(--border);
  border-radius: 0.5rem;
  padding: 1rem;
  overflow-x: auto;
  margin: 1.5rem 0;
}

.prose pre code {
  background: transparent;
  padding: 0;
  color: inherit;
  font-size: 0.875rem;
  line-height: 1.7;
}

/* Code block language label */
.prose pre::before {
  content: attr(data-language);
  display: block;
  font-size: 0.75rem;
  color: var(--muted-foreground);
  margin-bottom: 0.5rem;
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

/* YouTube embeds in prose */
.prose iframe[src*="youtube"] {
  width: 100%;
  aspect-ratio: 16/9;
  border-radius: 0.5rem;
  margin: 1.5rem 0;
}

/* Image hover effect in prose */
.prose img {
  cursor: pointer;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.prose img:hover {
  transform: scale(1.01);
  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);
}

/* Image size variants based on title attribute */
.prose img[title="container"] {
  width: 100%;
  max-width: 100%;
  margin-left: 0;
  margin-right: 0;
}

.prose img[title="full"] {
  width: 100vw;
  max-width: 100vw;
  margin-left: calc(-50vw + 50%);
  margin-right: calc(-50vw + 50%);
  border-radius: 0;
}

/* ========================================
   react-notion-x Overrides
   Use theme fonts and colors
   ======================================== */

/* Base notion styles - inherit theme fonts */
.notion,
.notion-page,
.notion-text,
.notion-h1,
.notion-h2,
.notion-h3,
.notion-list,
.notion-callout-text,
.notion-toggle,
.notion-quote {
  font-family: inherit !important;
  color: var(--foreground) !important;
}

/* Dark mode support for react-notion-x */
.dark .notion,
.dark .notion-page {
  color: var(--foreground) !important;
}

.dark .notion-text,
.dark .notion-h1,
.dark .notion-h2,
.dark .notion-h3,
.dark .notion-list,
.dark .notion-callout-text,
.dark .notion-toggle,
.dark .notion-quote {
  color: var(--foreground) !important;
}

/* Notion headings - match theme */
.notion-h1,
.notion-h2,
.notion-h3 {
  font-weight: 700;
  letter-spacing: -0.025em;
  scroll-margin-top: 6rem;
}

.notion-h1 {
  font-size: 2rem;
  margin-top: 3rem;
  margin-bottom: 1.5rem;
}

.notion-h2 {
  font-size: 1.5rem;
  margin-top: 2.5rem;
  margin-bottom: 1rem;
}

.notion-h3 {
  font-size: 1.25rem;
  margin-top: 2rem;
  margin-bottom: 0.75rem;
}

/* Notion links - use primary color */
.notion-link {
  color: var(--primary) !important;
  text-decoration: none;
}

.notion-link:hover {
  text-decoration: underline;
}

/* Notion code blocks */
.notion-code {
  background: var(--muted) !important;
  border: 1px solid var(--border) !important;
  border-radius: 0.5rem;
  font-family: var(--font-mono), monospace !important;
}

.dark .notion-code {
  background: var(--muted) !important;
  color: var(--foreground) !important;
}

/* Notion callout */
.notion-callout {
  background: var(--muted) !important;
  border: 1px solid var(--border) !important;
  border-radius: 0.5rem;
}

/* Notion quote */
.notion-quote {
  border-left: 3px solid var(--primary);
  background: var(--muted);
  padding: 0.5rem 1rem;
  border-radius: 0 0.5rem 0.5rem 0;
}

/* Notion table */
.notion-table,
.notion-simple-table {
  border-collapse: collapse;
  width: 100%;
}

.notion-table th,
.notion-table td,
.notion-simple-table th,
.notion-simple-table td {
  border: 1px solid var(--border) !important;
  padding: 0.5rem 0.75rem;
}

.notion-table th,
.notion-simple-table th {
  background: var(--muted) !important;
  font-weight: 600;
}

/* Notion toggle */
.notion-toggle {
  background: var(--card) !important;
  border: 1px solid var(--border) !important;
  border-radius: 0.5rem;
  padding: 0.75rem 1rem;
  margin: 0.5rem 0;
}

/* Notion images */
.notion-asset-wrapper img {
  border-radius: 0.75rem;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
}

/* Notion divider */
.notion-hr {
  border-color: var(--border) !important;
}

/* Notion embeds - ensure proper styling */
.notion-asset-wrapper iframe {
  border-radius: 0.5rem;
  border: 1px solid var(--border);
}

/* Hide notion page title/icon (we render our own) */
.notion-title,
.notion-page-icon-hero {
  display: none !important;
}

/* Notion to-do checkboxes */
.notion-to-do {
  display: flex;
  align-items: flex-start;
  gap: 0.5rem;
}

.notion-to-do-checked {
  text-decoration: line-through;
  opacity: 0.6;
}

/* Column layouts */
.notion-column-block {
  padding-right: 1rem;
}

/* Ensure proper spacing and readability */
.notion-renderer-wrapper {
  line-height: 1.9;
  font-size: 1.125rem;
  /* 18px */
}

/* Body text styling for readability */
.notion-text,
.notion-list,
.notion-quote,
.notion-callout-text,
.notion-toggle {
  font-size: 1.125rem;
  /* 18px */
  line-height: 1.9;
}

.notion-renderer-wrapper>* {
  margin-bottom: 1rem;
}

/* Hide Notion page properties (redundant with ezBlog header) */
.notion-collection-row,
.notion-collection-row-body,
.notion-collection-row-property,
.notion-page-properties,
.notion-collection-page-properties,
.notion-property,
.notion-page-icon-inline,
.notion-page-header {
  display: none !important;
}

/* ========================================
   Prism.js Tomorrow Night Theme
   Code syntax highlighting colors
   ======================================== */

/* Token styles */
.token.comment,
.token.prolog,
.token.doctype,
.token.cdata {
  color: #6a737d;
  font-style: italic;
}

.token.punctuation {
  color: #f8f8f2;
}

.token.namespace {
  opacity: 0.7;
}

.token.property,
.token.tag,
.token.constant,
.token.symbol,
.token.deleted {
  color: #f97583;
}

.token.boolean,
.token.number {
  color: #79b8ff;
}

.token.selector,
.token.attr-name,
.token.string,
.token.char,
.token.builtin,
.token.inserted {
  color: #9ecbff;
}

.token.operator,
.token.entity,
.token.url,
.language-css .token.string,
.style .token.string,
.token.variable {
  color: #f8f8f2;
}

.token.atrule,
.token.attr-value,
.token.function,
.token.class-name {
  color: #b392f0;
}

.token.keyword {
  color: #f97583;
  font-weight: 500;
}

.token.regex,
.token.important {
  color: #ffab70;
}

.token.important,
.token.bold {
  font-weight: bold;
}

.token.italic {
  font-style: italic;
}

/* Notion code block specific styling */
.notion-code {
  background: #1e1e1e !important;
  border-radius: 0.5rem !important;
  padding: 1rem !important;
  overflow-x: auto;
}

.notion-code code {
  color: #e6e6e6 !important;
  font-family: ui-monospace, SFMono-Regular, 'SF Mono', Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace !important;
  font-size: 0.875rem !important;
  line-height: 1.7 !important;
}

/* Toggle blocks - add left padding */
.notion-toggle {
  padding-left: 1rem;
  margin: 0.5rem 0;
}

.notion-toggle>summary {
  cursor: pointer;
  font-weight: 500;
}

.notion-toggle>div {
  padding-left: 1.5rem;
  margin-top: 0.5rem;
}

/* Callout blocks - styled like Notion */
.notion-callout {
  display: flex !important;
  align-items: flex-start !important;
  gap: 0.75rem !important;
  padding: 1rem !important;
  margin: 1rem 0 !important;
  border-radius: 0.5rem !important;
  background: hsl(var(--muted) / 0.3) !important;
  border: 1px solid hsl(var(--border)) !important;
}

.notion-callout-icon,
.notion-callout> :first-child {
  font-size: 1.25rem;
  line-height: 1.5;
  flex-shrink: 0;
}

.notion-callout-text,
.notion-callout>div:last-child,
.notion-callout> :not(:first-child) {
  flex: 1;
  min-width: 0;
  color: hsl(var(--foreground)) !important;
}

/* Ensure all text inside callout is visible */
.notion-callout *,
.notion-callout .notion-page-content-inner,
.notion-callout .notion-text,
.notion-callout p,
.notion-callout span {
  color: hsl(var(--foreground)) !important;
}

/* Embed blocks (Figma, etc.) */
.notion-embed,
.notion-figma,
.notion-asset-wrapper {
  width: 100% !important;
  margin: 1rem 0 !important;
  border-radius: 0.75rem !important;
  overflow: hidden !important;
}

.notion-asset-wrapper iframe {
  width: 100% !important;
  min-height: 400px !important;
  border-radius: 0.75rem !important;
  border: none !important;
}

/* External object instance (Figma uses this type) */
.notion-external-object-instance,
.notion-external_object_instance {
  width: 100% !important;
  min-height: 400px !important;
  margin: 1rem 0 !important;
  border-radius: 0.75rem !important;
  overflow: hidden !important;
}

.notion-external-object-instance iframe,
.notion-external_object_instance iframe {
  width: 100% !important;
  min-height: 400px !important;
  border-radius: 0.75rem !important;
  border: none !important;
}

/* Audio embeds (Spotify, SoundCloud) - Notion uses 12px radius */
/* Spotify single track: 152px, Spotify album/playlist: 352px */
.notion-audio,
.notion-asset-wrapper:has(iframe[src*="spotify"]),
.notion-asset-wrapper:has(iframe[src*="soundcloud"]) {
  width: 100% !important;
  max-width: 100% !important;
  height: auto !important;
  min-height: 152px !important;
  border-radius: 12px !important;
  overflow: hidden !important;
  background: transparent !important;
}

.notion-audio iframe,
iframe[src*="spotify.com"],
iframe[src*="soundcloud.com"] {
  width: 100% !important;
  height: 152px !important;
  min-height: 152px !important;
  border-radius: 12px !important;
  border: none !important;
}

/* Spotify playlist/album embeds need more height */
iframe[src*="spotify.com/embed/album"],
iframe[src*="spotify.com/embed/playlist"] {
  height: 352px !important;
  min-height: 352px !important;
}

/* Force all embed iframes to have no border */
.notion-asset-wrapper iframe,
.notion-embed iframe {
  border: none !important;
}

/* Prism.js Tomorrow Theme - Self-hosted to eliminate third-party cookies */
code[class*="language-"],
pre[class*="language-"] {
  color: #ccc;
  background: 0 0;
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  font-size: 1em;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.5;
  tab-size: 4;
  hyphens: none;
}

pre[class*="language-"] {
  padding: 1em;
  margin: 0.5em 0;
  overflow: auto;
  border-radius: 0.5rem;
}

:not(pre)>code[class*="language-"],
pre[class*="language-"] {
  background: #2d2d2d;
}

:not(pre)>code[class*="language-"] {
  padding: 0.1em;
  border-radius: 0.3em;
  white-space: normal;
}

.token.block-comment,
.token.cdata,
.token.comment,
.token.doctype,
.token.prolog {
  color: #999;
}

.token.punctuation {
  color: #ccc;
}

.token.attr-name,
.token.deleted,
.token.namespace,
.token.tag {
  color: #e2777a;
}

.token.function-name {
  color: #6196cc;
}

.token.boolean,
.token.function,
.token.number {
  color: #f08d49;
}

.token.class-name,
.token.constant,
.token.property,
.token.symbol {
  color: #f8c555;
}

.token.atrule,
.token.builtin,
.token.important,
.token.keyword,
.token.selector {
  color: #cc99cd;
}

.token.attr-value,
.token.char,
.token.regex,
.token.string,
.token.variable {
  color: #7ec699;
}

.token.entity,
.token.operator,
.token.url {
  color: #67cdcc;
}

.token.bold,
.token.important {
  font-weight: 700;
}

.token.italic {
  font-style: italic;
}

.token.entity {
  cursor: help;
}

.token.inserted {
  color: #57ab5a;
}

/* Bookmark/Link Preview blocks - ensure text is visible in dark mode */
.notion-bookmark,
.notion-link-preview,
.notion-asset-wrapper a[href],
a.notion-bookmark {
  border: 1px solid hsl(var(--border)) !important;
  border-radius: 0.5rem !important;
  background: hsl(var(--muted) / 0.3) !important;
}

.notion-bookmark-title,
.notion-link-preview-title,
.notion-bookmark .notion-bookmark-content .notion-bookmark-title {
  color: hsl(var(--foreground)) !important;
}

.dark .notion-bookmark-title,
.dark .notion-link-preview-title,
.dark .notion-bookmark .notion-bookmark-content .notion-bookmark-title {
  color: #ffffff !important;
}

.notion-bookmark-description,
.notion-link-preview-description,
.notion-bookmark .notion-bookmark-content .notion-bookmark-description {
  color: hsl(var(--muted-foreground)) !important;
}

.dark .notion-bookmark-description,
.dark .notion-link-preview-description,
.dark .notion-bookmark .notion-bookmark-content .notion-bookmark-description {
  color: #a1a1aa !important;
  /* zinc-400 */
}

.notion-bookmark-link,
.notion-bookmark .notion-bookmark-content .notion-bookmark-link,
.notion-bookmark-link-text {
  color: hsl(var(--muted-foreground)) !important;
}

.dark .notion-bookmark-link,
.dark .notion-bookmark .notion-bookmark-content .notion-bookmark-link,
.dark .notion-bookmark-link-text {
  color: #a1a1aa !important;
  /* zinc-400 */
}

/* Generic fix for any dark text in Notion blocks in dark mode */
.dark .notion-bookmark *,
.dark .notion-link-preview * {
  border-color: #3f3f46 !important;
  /* zinc-700 */
}